define("mod_mplayer/mplayer_assessables",["jquery","core/log","core/config"],(function($,log,cfg){var modmplayerassessables={ismarking:!1,currentzone:null,startpoint:0,startpointtime:0,endpoint:0,endpointtime:0,init:function(){$(".mplayer-bumper").bind("click",this.bump_in),$(".mplayer-punchinout").bind("click",this.start_marking),log.debug("AMD Mplayer Asessables initialized")},start_marking:function(){var mplayerid=$(this).attr("id").replace("mplayer-punchinout-",""),matches=$("#flp"+mplayerid).attr("class").match(/video([0-9]+)/),clipid=0+parseInt(matches[1]),newsegment=$("#mplayer-progress-"+mplayerid+"_"+clipid+" .mod-mplayer-progressbar-outer .progressbar-segment.newzone");$(newsegment).removeClass("is-hidden"),$(newsegment).css("left","0%"),modmplayerassessables.currentzone=newsegment,modmplayerassessables.ismarking=!0,$("#mplayer-punchinout-"+mplayerid).attr("value","Stop marking zone"),$("#mplayer-punchinout-"+mplayerid).css("background-color","red"),$("#mplayer-punchinout-"+mplayerid).css("color","white"),$("#mplayer-punchinout-"+mplayerid).off("click"),$("#mplayer-punchinout-"+mplayerid).bind("click",modmplayerassessables.stop_marking),$("#mplayer-punchinout-"+mplayerid).addClass("is-marking")},stop_marking:function(){var mplayerid=$(this).attr("id").replace("mplayer-punchinout-",""),matches=$("#flp"+mplayerid).attr("class").match(/video([0-9]+)/),clipid=0+parseInt(matches[1]);$("#mplayer-punchinout-"+mplayerid).attr("value","Start marking zone"),$("#mplayer-punchinout-"+mplayerid).css("background-color","initial"),$("#mplayer-punchinout-"+mplayerid).css("color","black");var url=cfg.wwwroot+"/mod/mplayer/pro/ajax/services.php?";url+="what=addzone",url+="&mplayerid="+mplayerid,url+="&clipid="+clipid,url+="&startpoint="+modmplayerassessables.startpoint,url+="&endpoint="+modmplayerassessables.endpoint,url+="&startpointtime="+modmplayerassessables.startpointtime,url+="&endpointtime="+modmplayerassessables.endpointtime,$.get(url,(function(){}),"json");$("#mplayer-progress-"+mplayerid+"_"+clipid+" .mod-mplayer-progressbar-outer .progressbar-segment.newzone").addClass("is-hidden"),modmplayerassessables.ismarking=!1,modmplayerassessables.startpoint=modmplayerassessables.endpoint,$("#mplayer-punchinout-"+mplayerid).off("click"),$("#mplayer-punchinout-"+mplayerid).bind("click",modmplayerassessables.start_marking),$("#mplayer-punchinout-"+mplayerid).removeClass("is-marking")},delete_zone:function(){var that=$(this),parts=that.attr("data-zone").split("-"),mplayerid=parts[0],clipid=parts[1],zoneid=parts[2],url=cfg.wwwroot+"/mod/mplayer/pro/ajax/services.php?";url+="&what=deletezone",url+="&mplayerid="+mplayerid,url+="&clipid="+clipid,url+="&zoneid="+zoneid,$.get(url,(function(){$("body").remove("#"+that.attr("id"))}),"json")},bump_in:function(){var mplayerid=$(this).attr("id").replace("mplayer-bumper-",""),matches=$("#flp"+mplayerid).attr("class").match(/video([0-9]+)/),clipid=0+parseInt(matches[1]),url=cfg.wwwroot+"/mod/mplayer/pro/ajax/services.php?";url+="what=bumpzone",url+="&mplayerid="+mplayerid,url+="&clipid="+clipid,url+="&progress="+modmplayerassessables.startpoint,url+="&progresstime="+modmplayerassessables.startpointtime,$.get(url,(function(data){"true"==data.matched&&($("#mplayer-progress-"+data.mpid+"_"+data.index).html(data.progressbar),$("#mplayer-assess-counts-"+data.mpid+"_"+data.index).html(data.counter))}),"json")}};return window.modmplayerassessables=modmplayerassessables,modmplayerassessables}));

//# sourceMappingURL=mplayer_assessables.min.js.map